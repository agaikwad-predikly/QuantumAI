import smtplibfrom email.mime.multipart import MIMEMultipartfrom email.mime.text import MIMETextfrom email.mime.base import MIMEBasefrom email import encodersimport osimport os.pathimport datetimeimport error_log as logimport database as dbdef mail_helper(to, cc, bcc, subject, body, filename):	try:		fromaddr = "laxmikant.ainapure@predikly.com"		msg = MIMEMultipart() 		msg['From'] = fromaddr		msg['To'] = to		if cc is not None:			msg['CC'] = cc		if bcc is not None:			msg['BCC'] = bcc		msg['Subject'] = subject		body = body		msg.attach(MIMEText(body, 'html'))				if filename is not None:			attachments = filename.split(',')			for attach in attachments:				p = MIMEBase('application', 'octet-stream') 				attachment = open( attach, "rb")				p.set_payload((attachment).read())				encoders.encode_base64(p)				p.add_header('Content-Disposition', "attachment; filename= %s" % os.path.basename(attach))				msg.attach(p)		s = smtplib.SMTP('smtp.gmail.com', 587)		s.starttls()		s.login(fromaddr, "laxmikantrordev@1493")		text = msg.as_string()				toaddrs = to.split(',') + ( cc.split(',') if (cc is not None) else  ''.split(',')) + ( bcc.split(',') if (bcc is not None) else  ''.split(','))		s.sendmail(fromaddr, toaddrs, text)		s.quit()		return True	except Exception as e:		return False			def send_eikon_failure_mail():	try:		return mail_helper('amit.gaikwad@predikly.com',None,None,'Eikon proxy issue','<div style="margin: 0 auto; font-size:14px;">Their is an issue in ticker data pulling.</div><div style="margin: 0 auto; font-size:14px;"> Please restart the eikon proxy.</div>',None)	except Exception as e:		return Falsedef send_error_details_mail():	try:		filename = os.getcwd() + "\\" +"ErrorLog"+datetime.date.today().strftime('%Y%m%d')+".log"		filename2 = os.getcwd() + "\\" +"TickerLog"+datetime.date.today().strftime('%Y%m%d')+".log"		p_date=datetime.date.today().strftime('%Y%m%d')		i=0		data = db.call_procedure("get_ticker_log_data",[p_date])		if len(data)>0:			filename = filename + "," + filename2			while i < len(data):				log.CustomLog(filename2, 'Ticker id='+ data[i][0],'Ticker_name ='+data[i][1],"Ticker_symbol ="+data[i][2],"Status ="+data[i][3],"Total process count ="+data[i][4],"Success count ="+data[i][5],"Failed count"+data[i][6],"Job Date ="+data[i][7])				i+=1				return mail_helper('amit.gaikwad@predikly.com',None,None,'Error log details','<div style="margin: 0 auto : font-size: medium;">Please Find attached file for details of error.</div>',filename)	except Exception as e:		return Falsesend_error_details_mail()